<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>earth_size - NeoFermi Notebook</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <style>

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: #1e1e1e;
  color: #d4d4d4;
  line-height: 1.6;
  padding: 20px;
}

.neofermi-notebook {
  max-width: 800px;
  margin: 0 auto;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
  color: #ffffff;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  font-weight: 600;
}

h1 { font-size: 2em; border-bottom: 1px solid #3e3e3e; padding-bottom: 0.3em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }

p {
  margin: 1em 0;
}

a {
  color: #4ec9b0;
}

ul, ol {
  margin: 1em 0;
  padding-left: 2em;
}

blockquote {
  border-left: 4px solid #4ec9b0;
  padding-left: 1em;
  margin: 1em 0;
  color: #888;
}

/* Code blocks (non-NeoFermi) */
pre {
  background: #252525;
  border-radius: 6px;
  padding: 12px;
  overflow-x: auto;
  margin: 1em 0;
}

code {
  font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
  font-size: 0.9em;
}

p code, li code {
  background: #252525;
  padding: 2px 6px;
  border-radius: 3px;
}

/* NeoFermi cells */
.nf-cell {
  background: #252525;
  border-radius: 8px;
  margin: 1em 0;
  border: 1px solid #3e3e3e;
  overflow: hidden;
}

.nf-code {
  background: #2d2d2d;
  margin: 0;
  padding: 12px;
  border-bottom: 1px solid #3e3e3e;
  border-radius: 0;
}

.nf-code code {
  color: #ce9178;
}

.nf-result {
  padding: 12px;
  background: rgba(206, 145, 120, 0.08);
}

.nf-stats {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.nf-stat {
  font-size: 0.9em;
}

.nf-stat strong {
  color: #4ec9b0;
}

.nf-scalar {
  color: #4ec9b0;
  font-weight: 500;
}

.nf-dim {
  color: #888;
  font-style: italic;
  font-size: 0.9em;
}

.nf-error {
  padding: 12px;
  background: rgba(244, 135, 113, 0.1);
  color: #f48771;
  font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
  font-size: 0.85em;
}

.nf-viz {
  padding: 12px;
  display: flex;
  justify-content: center;
}

.nf-viz canvas {
  border-radius: 4px;
}

/* Tables */
table {
  border-collapse: collapse;
  margin: 1em 0;
  width: 100%;
}

th, td {
  border: 1px solid #3e3e3e;
  padding: 8px 12px;
  text-align: left;
}

th {
  background: #2d2d2d;
  font-weight: 600;
}

/* Horizontal rule */
hr {
  border: none;
  border-top: 1px solid #3e3e3e;
  margin: 2em 0;
}

/* Images */
img {
  max-width: 100%;
  border-radius: 4px;
}

  </style>
</head>
<body>
  <article class="neofermi-notebook">
<h1>Estimating the Earth's Circumference</h1>
<p>A classic Fermi estimation using what we know about time zones and the United States.</p>
<h2>What We Know</h2>
<p>The Earth has 24 time zones (one for each hour). The continental US spans about 4 of these time zones (Eastern, Central, Mountain, Pacific). And we roughly know how wide the US is.</p>
<h2>The Estimation</h2>
<h3>US Width</h3>
<p>The continental US is roughly 2000-3000 miles wide:</p>
<div class="nf-cell">
<pre class="nf-code"><code>mile = 5280 feet
us_width = 2000 to 3000 mile</code></pre>
<div class="nf-result"><div class="nf-stats">
<span class="nf-stat">Mean: <strong>2503</strong> mile <span class="nf-dim">{length}</span></span>
<span class="nf-stat">Median: 2453 mile</span>
<span class="nf-stat">[68% CI]: [1999, 3005] mile</span>
</div></div><div class="nf-viz" data-samples="[1450.2672342222177,1581.971751959164,1647.6288804405096,1695.4139767735373,1732.8894620970266,1764.7259929337124,1795.7349134891651,1825.3741196460558,1850.9132160328613,1873.3757477179736,1895.608322144479,1916.884990617144,1937.996831990887,1955.4576144291418,1973.8706674755406,1991.2162283777623,2008.18129556674,2023.814717279476,2040.589710669549,2056.7637156522696,2069.655481201806,2084.7715800010023,2098.3832982996723,2113.643891258339,2128.5554725609272,2142.708221919052,2157.49846027641,2170.8793348048057,2184.540267373297,2198.290203872853,2210.993281805949,2223.338411129481,2236.1762500357836,2248.973884874786,2261.462217961636,2273.5338018276257,2284.2032999960993,2297.196040008692,2309.4528314905815,2320.1845781810616,2335.4243773048984,2348.1017611710395,2361.516595181519,2372.048082511095,2385.3341541920176,2396.5917858181047,2408.3059304531453,2420.2835505472162,2432.7295504707295,2445.539564948614,2458.7282832990168,2470.192392407697,2480.4354897605576,2493.0180144518185,2506.6428961798533,2519.777300906818,2533.905036172409,2548.6672747523353,2561.584556936583,2574.6270348668077,2589.6328773492205,2601.4730374316787,2614.170782336101,2627.534073694458,2641.5958037773626,2655.7437501017835,2671.3533158151386,2684.7003451247474,2700.620860335708,2718.2243863807867,2733.644750671687,2750.0967447829494,2767.0754081632685,2782.687075757805,2802.1857776152137,2820.633665659203,2838.8653403921917,2856.559280555965,2881.5340004307236,2901.7993551435143,2923.0777546199724,2943.891739731834,2968.063601541012,2993.0919564811375,3017.1974115655194,3044.6283935496363,3071.8955981647578,3102.70197732637,3136.2716269700936,3167.410020206654,3210.88393342707,3250.376181671935,3296.5146396123987,3351.994969867167,3414.34503399798,3481.2363527381403,3549.2728493502354,3660.21921533005,3820.744625294587,4157.316885001205]" data-unit="mile" data-min="1171.9399316881822" data-max="5411.2304037245885"></div>
</div>
<h3>Time Zone Width</h3>
<p>The US spans about 4 time zones, so each time zone is:</p>
<div class="nf-cell">
<pre class="nf-code"><code>us_timezones = 3 to 5
timezone_width = us_width / us_timezones</code></pre>
<div class="nf-result"><div class="nf-stats">
<span class="nf-stat">Mean: <strong>668</strong> mile <span class="nf-dim">{length}</span></span>
<span class="nf-stat">Median: 633 mile</span>
<span class="nf-stat">[68% CI]: [457, 878] mile</span>
</div></div><div class="nf-viz" data-samples="[271.69015280249715,312.7765625347375,335.546449526246,353.00792265562194,366.22448288981064,377.18163547296575,386.8254316203512,397.2190986928789,404.85018591907385,413.28026355605164,420.9731772158671,427.9042191920784,434.07776348830765,440.6533130442236,447.30105258683227,453.542155971012,460.12098291365555,466.15674340037896,471.9571115402322,477.17097226766924,483.33440290102374,489.08570996840876,494.5560153995547,500.37293212031824,505.6299422648507,510.74626756635666,515.6069209223498,520.5997788206116,525.9908863646089,530.8155185819603,535.9584512184051,541.474966749413,546.0048398193574,550.9177450164144,555.44565294859,560.073423062707,564.4569148030198,569.9680033306204,575.0436118390256,580.134554450672,585.2719270446388,590.0194096738545,594.7186269398586,600.3007905123101,605.7051493147754,610.230804838184,615.1817651518372,620.2581677947194,625.5149956849981,630.4382867207714,635.6136637844697,640.984227744232,645.7668972102974,651.2695064429782,656.010788226518,661.2310100377705,666.8996844761178,672.2981264914732,677.943393687942,683.1350864524893,689.3092070381853,695.8086132031979,702.0415848788069,708.9825348267302,715.1788029168935,721.6934593007633,727.8314209297558,733.908325303324,740.5082639237149,747.6867631699225,754.732242480006,762.823249768411,769.5922314157364,776.8113943646451,784.9126162160308,793.3707004204429,802.528038250847,811.63276137749,820.4937133723674,830.0175929757222,839.8536180427972,849.7066014868288,861.8298875343804,872.2389375077083,883.1690993135788,895.2805490077303,908.0818930160702,922.4674833429752,938.2947019785122,955.4514476451016,974.3257241107764,992.9794246278991,1016.3193223122774,1042.4380141980434,1070.959200112198,1107.4222083499296,1149.6237889115791,1199.2762983504574,1281.5432818919767,1448.9620571451471]" data-unit="mile" data-min="181.90575388384133" data-max="2588.25227815"></div>
</div>
<h3>Earth's Circumference</h3>
<p>With 24 time zones around the Earth:</p>
<div class="nf-cell">
<pre class="nf-code"><code>num_timezones = 24
earth_circumference = timezone_width * num_timezones</code></pre>
<div class="nf-result"><div class="nf-stats">
<span class="nf-stat">Mean: <strong>16029</strong> mile <span class="nf-dim">{length}</span></span>
<span class="nf-stat">Median: 15194 mile</span>
<span class="nf-stat">[68% CI]: [10965, 21069] mile</span>
</div></div><div class="nf-viz" data-samples="[6520.563667259932,7506.6375008337,8053.114788629904,8472.190143734926,8789.387589355456,9052.359251351178,9283.81035888843,9533.258368629093,9716.404462057773,9918.72632534524,10103.356253180811,10269.701260609882,10417.866323719383,10575.679513061366,10735.225262083975,10885.011743304287,11042.903589927733,11187.761841609095,11326.970676965571,11452.103334424062,11600.02566962457,11738.05703924181,11869.344369589313,12008.950370887638,12135.118614356415,12257.91042159256,12374.566102136396,12494.394691694679,12623.781272750613,12739.572445967047,12863.002829241723,12995.399201985914,13104.116155664577,13222.025880393947,13330.69567076616,13441.762153504968,13546.965955272475,13679.232079934889,13801.046684136614,13923.229306816127,14046.526249071332,14160.465832172507,14273.247046556608,14407.218972295443,14536.92358355461,14645.539316116416,14764.362363644093,14886.196027073265,15012.359896439953,15130.518881298514,15254.727930827274,15383.621465861568,15498.405533047138,15630.468154631479,15744.258917436433,15869.544240906493,16005.592427426829,16135.155035795357,16270.641448510609,16395.242074859743,16543.420968916445,16699.40671687675,16848.998037091365,17015.580835841523,17164.291270005444,17320.64302321832,17467.95410231414,17613.799807279775,17772.19833416916,17944.48231607814,18113.573819520145,18307.75799444186,18470.213553977672,18643.473464751485,18837.902789184736,19040.896810090628,19260.672918020326,19479.18627305976,19691.84912093682,19920.42223141733,20156.48683302713,20392.958435683893,20683.91730082513,20933.734500185,21196.05838352589,21486.733176185528,21793.965432385685,22139.219600231405,22519.07284748429,22930.83474348244,23383.817378658634,23831.50619106958,24391.663735494658,25018.51234075304,25703.02080269275,26578.13300039831,27590.9709338779,28782.63116041098,30757.03876540744,34775.08937148353]" data-unit="mile" data-min="4365.738093212192" data-max="62118.054675600004"></div>
</div>
<h3>Convert to Kilometers</h3>
<div class="nf-cell">
<pre class="nf-code"><code>earth_circumference_km = earth_circumference / mile * (1.6 km)</code></pre>
<div class="nf-result"><div class="nf-stats">
<span class="nf-stat">Mean: <strong>4.86</strong> (mile km) / feet <span class="nf-dim">{length}</span></span>
<span class="nf-stat">Median: 4.60 (mile km) / feet</span>
<span class="nf-stat">[68% CI]: [3.32, 6.38] (mile km) / feet</span>
</div></div><div class="nf-viz" data-samples="[1.9759283840181614,2.2747386366162727,2.440337814736335,2.5673303465863415,2.6634507846531683,2.7431391670761145,2.8132758663298274,2.8888661723118467,2.9443649885023557,3.0056746440440123,3.0616231070244884,3.1120306850332975,3.156929189005874,3.2047513675943535,3.2530985642678716,3.2984884070619054,3.346334421190223,3.390230861093665,3.432415356656234,3.470334343764868,3.5151592938256275,3.5569869815884276,3.5967710210876707,3.639075869965951,3.677308671017096,3.714518309573503,3.7498685157989082,3.786180209604448,3.8253882644698827,3.860476498777893,3.8978796452247644,3.93799975817755,3.970944289595326,4.006674509210288,4.039604748717018,4.07326125863787,4.105141198567416,4.145221842404513,4.182135358829277,4.219160396004887,4.256523105779191,4.291050252173487,4.325226377744427,4.365823930998619,4.405128358652912,4.438042217004975,4.474049201104271,4.510968493052505,4.549199968618168,4.585005721605611,4.622644827523416,4.661703474503506,4.6964865251658,4.736505501403478,4.7709875507383135,4.808952800274695,4.850179523462676,4.889440919937987,4.930497408639578,4.968255174199922,5.01315786936862,5.06042627784144,5.105756980936778,5.1562366169216745,5.201300384850136,5.248679704005552,5.293319424943679,5.337515093115083,5.385514646717927,5.437721913963074,5.488961763490953,5.54780545286117,5.597034410296264,5.649537413561056,5.708455390662042,5.769968730330493,5.836567550915251,5.902783719109019,5.9672270063444905,6.036491585277979,6.1080263130385255,6.179684374449665,6.267853727522767,6.34355590914697,6.423047995007846,6.511131265510766,6.604231949207784,6.708854424312547,6.823961468934634,6.948737801055285,7.086005266260192,7.2216685427483585,7.3914132531802,7.58136737598577,7.788794182634168,8.053979697090396,8.360900282993304,8.722009442548782,9.320314777396195,10.537905870146526]" data-unit="(mile km) / feet" data-min="1.322950937337028" data-max="18.823652932"></div>
</div>
<h2>Result</h2>
<p>The Earth's circumference is approximately <strong>16029 mile</strong> or <strong>4.86 (mile km) / feet</strong>.</p>
<p>The actual value is about 24,901 miles (40,075 km) - let's see how close our estimate is!</p>
  </article>
  <script type="module">

// Nice number for tick marks (1, 2, 5, 10, 20, 50, etc.)
function niceNum(x, round) {
  if (x === 0) return 0;
  const exp = Math.floor(Math.log10(Math.abs(x)));
  const f = x / Math.pow(10, exp);
  let nf;
  if (round) {
    nf = f < 1.5 ? 1 : f < 3 ? 2 : f < 7 ? 5 : 10;
  } else {
    nf = f <= 1 ? 1 : f <= 2 ? 2 : f <= 5 ? 5 : 10;
  }
  return nf * Math.pow(10, exp);
}

function generateLinearTicks(min, max, maxTicks = 5) {
  const range = niceNum(max - min, false);
  const spacing = niceNum(range / (maxTicks - 1), true);
  const niceMin = Math.floor(min / spacing) * spacing;
  const niceMax = Math.ceil(max / spacing) * spacing;
  const ticks = [];
  for (let t = niceMin; t <= niceMax + spacing * 0.5; t += spacing) {
    if (t >= min && t <= max) ticks.push(t);
  }
  return ticks;
}

function generateLogTicks(min, max) {
  if (min <= 0 || max <= 0) return [];
  const minExp = Math.floor(Math.log10(min));
  const maxExp = Math.ceil(Math.log10(max));
  const ticks = [];
  for (let exp = minExp; exp <= maxExp; exp++) {
    const tick = Math.pow(10, exp);
    if (tick >= min * 0.99 && tick <= max * 1.01) ticks.push(tick);
  }
  if (ticks.length <= 2) {
    const allTicks = [];
    for (let exp = minExp; exp <= maxExp; exp++) {
      for (const mult of [1, 2, 5]) {
        const tick = mult * Math.pow(10, exp);
        if (tick >= min * 0.99 && tick <= max * 1.01) allTicks.push(tick);
      }
    }
    return allTicks;
  }
  return ticks;
}

function formatNum(n) {
  if (n === 0) return '0';
  const abs = Math.abs(n);
  if (abs >= 10000 || abs < 0.001) return n.toExponential(0);
  if (Math.abs(n - Math.round(n)) < 0.001) return Math.round(n).toString();
  if (abs >= 100) return n.toFixed(0);
  if (abs >= 10) return n.toFixed(1);
  if (abs >= 1) return n.toFixed(2);
  return n.toPrecision(2);
}

function renderDotplots() {
  document.querySelectorAll('.nf-viz').forEach(el => {
    const samples = JSON.parse(el.dataset.samples || '[]');
    const unit = el.dataset.unit || '';
    const min = parseFloat(el.dataset.min);
    const max = parseFloat(el.dataset.max);

    if (samples.length === 0) return;

    const dpr = window.devicePixelRatio || 1;
    const displayWidth = el.clientWidth || 500;
    const displayHeight = 90;

    const canvas = document.createElement('canvas');
    canvas.width = displayWidth * dpr;
    canvas.height = displayHeight * dpr;
    canvas.style.width = displayWidth + 'px';
    canvas.style.height = displayHeight + 'px';
    el.appendChild(canvas);

    const ctx = canvas.getContext('2d');
    ctx.scale(dpr, dpr);

    const width = displayWidth;
    const height = displayHeight;
    const dotRadius = 4;
    const padding = 30;
    const axisHeight = 20;

    // Background
    ctx.fillStyle = '#1a1a2e';
    ctx.fillRect(0, 0, width, height);

    const useLog = min > 0 && max > 0 && (max / min) > 100;
    const toX = useLog
      ? v => padding + ((Math.log10(v) - Math.log10(min)) / (Math.log10(max) - Math.log10(min))) * (width - 2 * padding)
      : v => padding + ((v - min) / (max - min)) * (width - 2 * padding);

    // Generate nice ticks
    const ticks = useLog ? generateLogTicks(min, max) : generateLinearTicks(min, max, 5);

    // Bin dots by X position to stack them
    const binWidth = dotRadius * 2.2;
    const bins = new Map();
    samples.forEach(v => {
      const x = toX(v);
      const binIndex = Math.round(x / binWidth);
      if (!bins.has(binIndex)) bins.set(binIndex, []);
      bins.get(binIndex).push({ x, v });
    });

    // Draw stacked dots from bottom up
    const baseY = height - axisHeight - dotRadius - 2;
    ctx.fillStyle = 'rgba(99, 102, 241, 0.85)';
    bins.forEach(dots => {
      dots.forEach((dot, i) => {
        const y = baseY - i * (dotRadius * 2.2);
        if (y > dotRadius) {
          ctx.beginPath();
          ctx.arc(dot.x, y, dotRadius, 0, Math.PI * 2);
          ctx.fill();
        }
      });
    });

    // Draw axis line
    const axisY = height - axisHeight;
    ctx.strokeStyle = '#555';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(padding, axisY);
    ctx.lineTo(width - padding, axisY);
    ctx.stroke();

    // Draw ticks and labels
    ctx.fillStyle = '#999';
    ctx.font = '10px -apple-system, sans-serif';
    ctx.textAlign = 'center';
    ticks.forEach(tick => {
      const x = toX(tick);
      // Tick mark
      ctx.beginPath();
      ctx.moveTo(x, axisY);
      ctx.lineTo(x, axisY + 4);
      ctx.stroke();
      // Label
      ctx.fillText(formatNum(tick), x, axisY + 14);
    });

    // Unit label on right
    if (unit) {
      ctx.fillStyle = '#777';
      ctx.textAlign = 'right';
      ctx.fillText(unit, width - 5, axisY + 14);
    }
  });
}

renderDotplots();

  </script>
</body>
</html>